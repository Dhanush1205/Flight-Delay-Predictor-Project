<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flight Map</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:Arial;background:#f5f5f5;height:100vh}
        .c{max-width:1200px;margin:0 auto;padding:20px;height:100%}
        .m{position:relative;width:100%;height:80vh;background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);overflow:hidden}
        .i{position:absolute;top:20px;right:20px;background:rgba(255,255,255,.9);padding:15px;border-radius:5px;box-shadow:0 2px 4px rgba(0,0,0,.1);z-index:1000}
        .i h4{margin-bottom:10px;color:#333;font-size:16px}
        .i p{color:#666;font-size:14px}
        .l{position:absolute;bottom:20px;right:20px;background:rgba(255,255,255,.9);padding:15px;border-radius:5px;box-shadow:0 2px 4px rgba(0,0,0,.1);z-index:1000}
        .li{display:flex;align-items:center;margin:5px 0}
        .lc{width:20px;height:20px;margin-right:10px;border:1px solid #ddd;border-radius:3px}
        .d0{background:#FFEDA0}
        .d5{background:#FD8D3C}
        .d10{background:#FC4E2A}
        .d15{background:#E31A1C}
        .d20{background:#BD0026}
        .d25{background:#800026}
        .r{position:absolute;left:20px;top:20px;background:rgba(255,255,255,.9);padding:15px;border-radius:5px;box-shadow:0 2px 4px rgba(0,0,0,.1);z-index:1000}
        .r h4{margin-bottom:10px;color:#333}
        .r p{margin:5px 0;color:#666}
        .s{display:inline-block;padding:3px 8px;border-radius:3px;font-size:12px;font-weight:bold}
        .sd{background:#ffebee;color:#c62828}
        .so{background:#e8f5e9;color:#2e7d32}
        .mi{width:100%;height:100%;object-fit:cover}
        .map{width:100%;height:100%}
    </style>
</head>
<body>
    <div class="c">
        <div class="m">
            <div class="i">
                <h4>Flight Delay Map</h4>
                <p>Selected Routes</p>
            </div>
            <div class="r">
                <h4>Route Details</h4>
                <p><strong>Origin:</strong> {{ origin }}</p>
                <p><strong>Destination:</strong> {{ destination }}</p>
                <p><strong>Status:</strong> <span class="s {{ 'sd' if is_delayed else 'so' }}">{{ 'Delayed' if is_delayed else 'On Time' }}</span></p>
            </div>
            <div class="map">
                {{ map|safe }}
            </div>
            <div class="l">
                <h4>Delay Probability</h4>
                <div class="li"><div class="lc d0"></div><span>0%</span></div>
                <div class="li"><div class="lc d5"></div><span>1-5%</span></div>
                <div class="li"><div class="lc d10"></div><span>6-10%</span></div>
                <div class="li"><div class="lc d15"></div><span>11-15%</span></div>
                <div class="li"><div class="lc d20"></div><span>16-20%</span></div>
                <div class="li"><div class="lc d25"></div><span>20%+</span></div>
            </div>
        </div>
    </div>
</body>
</html>
